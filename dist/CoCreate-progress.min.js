!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.progress=t():(e.CoCreate=e.CoCreate||{},e.CoCreate.progress=t())}(this,function(){return o={},n.m=r=[function(e,t,r){"use strict";r.r(t);r={selector:".progress-wrapper",mainObjects:[],init:function(){this.initElement(),this.initEvent()},initElement:function(e){var e=(e||document).querySelectorAll(this.selector),r=this;e.forEach(function(e){var t=CoCreate.filter.setFilter(e,"data-progress_id","progress");t&&(t={el:e,filter:t,id:e.getAttribute("data-progress_id")},r.mainObjects.push(t),r.fetchProgess(e))})},initEvent:function(){var t=this;CoCreate.socket.listen("readDocumentList",function(e){"progress-total"==e.metadata?t.renderProgress(e,!0):"progress-value"==e.metadata&&t.renderProgress(e,!1)})},renderProgress:function(e,t){var r,o,n;!e||(r=e.element)&&(o=e.data.length,n=this,e=t?".progressTotal":".progressValue",e+='[data-progress_id="'.concat(r,'"]'),document.querySelectorAll(e).forEach(function(e){e.textContent=o}),document.querySelectorAll('.progressbar[data-progress_id="'.concat(r,'"]')).forEach(function(e){"PROGRESS"===e.tagName?t?e.setAttribute("max",o):e.setAttribute("value",o):(t?e.setAttribute("data-total",o):e.setAttribute("data-value",o),n.renderBar(e))}))},renderBar:function(e){var t=Number(e.getAttribute("data-total")),r=Number(e.getAttribute("data-value"));t&&r&&0!==t&&(t=r/t*100,e.innerHTML='<div style="width: '.concat(t,'%"></div>'))},fetchProgess:function(e){var t,r,o,n,a,i=null,s=e.getAttribute("data-progress_id");this.mainObjects.forEach(function(e){e.id==s&&(i=e)}),i&&(a=i.filter,console.log(a),t=CoCreate.filter.makeFetchOptions(a),r=CoCreate.filter.makeFetchOptions(a),o=e.getAttribute("data-progress_name"),n=e.getAttribute("data-progress_value"),a=e.getAttribute("data-progress_operator")||"contain",t.metadata="progress-total",r.metadata="progress-value",(e=[].concat(r.operator.filters)).push({name:o,value:[n],operator:a}),r.operator.filters=e,CoCreate.crud.readDocumentList(t),CoCreate.crud.readDocumentList(r))}};r.init(),t.default=r}],n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0).default;function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,o});