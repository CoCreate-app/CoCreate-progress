!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CoCreate=e():(t.CoCreate=t.CoCreate||{},t.CoCreate.progress=e())}(this,(function(){return(()=>{var t={375:function(t,e,n){var r,o;"undefined"!=typeof self&&self,r=[n(446),n(965)],void 0===(o=function(t,e){return function(t,e,n){return{socket:null,setSocket:function(t){this.socket=t},readDocumentList:async function(t){if(!t)return!1;let n=e.getCommonParams();if(!t.collection)return!1;n={...n,...t},e.generateSocketClient(t.namespace,t.room);const r=this.socket.send("readDocumentList",n);try{return await this.socket.listenAsync(r)}catch(t){return null}},createDocument:async function(n){if(null===n)return!1;let r=e.getCommonParamsExtend(n),o={...n,...r},i=n.data||{};i.organization_id||(i.organization_id=t.config.organization_Id),n.data&&(i={...i,...n.data}),o.data=i;const a=e.generateSocketClient(n.namespace,n.room);let c=this.socket.send("createDocument",o,a);try{return await this.socket.listenAsync(c)}catch(t){return null}},updateDocument:async function(t){if(!t)return!1;if(t.document_id&&!n.checkDocumentId(t.document_id))return!1;let r=e.getCommonParamsExtend(t),o={...t,...r};if("object"==typeof t.data&&(o.set=t.data),Array.isArray(t.delete_fields)&&(o.unset=t.delete_fields),!o.set&&!o.unset)return!1;!1===t.broadcast&&(o.broadcast=!1),void 0===t.broadcast_sender&&(o.broadcast_sender=!0);const i=e.generateSocketClient(t.namespace,t.room);let a=this.socket.send("updateDocument",o,i);try{return await this.socket.listenAsync(a)}catch(t){return null}},readDocument:async function(t){if(null===t)return null;if(!t||!n.checkDocumentId(t.document_id))return null;let r=e.getCommonParamsExtend(t),o={...t,...r},i=this.socket.send("readDocument",o);try{return e.generateSocketClient(t.namespace,t.room),await this.socket.listenAsync(i)}catch(t){return null}},deleteDocument:async function(t){if(!t||!n.checkDocumentId(t.document_id))return null;let r=e.getCommonParamsExtend(t),o={...t,...r};const i=e.generateSocketClient(t.namespace,t.room);let a=this.socket.send("deleteDocument",o,i);try{return await this.socket.listenAsync(a)}catch(t){return null}},exportCollection:function(t){if(null===t)return;let n=e.getCommonParamsExtend(t);n.collection=t.collection,n.export_type=t.export_type,n.metadata=t.metadata,this.socket.send("exportDB",n)},importCollection:function(n){const{file:r}=n;if(null===n||!(r instanceof t.File))return;const o=r.name.split(".").pop();if(!["json","csv"].some((t=>t===o)))return;let i=e.getCommonParamsExtend(n);i.collection=n.collection,i.import_type=o,this.socket.send("importDB",i),this.socket.sendFile(r)},listen:function(t,e){this.socket.listen(t,e)},listenAsync:function(t){return this.socket.listenAsync(t)},createSocket:function(t,e){e?(this.socket.create({namespace:e,room:null,host:t}),this.socket.setGlobalScope(e)):this.socket.create({namespace:null,room:null,host:t})},read:async function(t,e){const{collection:r,document_id:o,name:i,namespace:a,room:c,is_read:s}=n.getAttr(t);if(!n.checkAttrValue(o))return!1!==e&&(e=!0),n.isJsonString(r)||n.isJsonString(o)?null:o&&r&&s?await this.readDocument({namespace:a,room:c,collection:r,document_id:o,name:i,is_flat:e}):null},save:async function(t){if(t)for(let e=0;e<t.length;e++)await this.saveElement(t[e])},saveElement:async function({element:e,value:r,is_flat:o}){if(!e||null===r)return;const{collection:i,document_id:a,name:c,namespace:s,room:l,broadcast:u,broadcast_sender:d,is_save:f}=n.getAttr(e);if(f&&i&&c)if(n.isCRDT(e)&&t.CoCreate.crdt)t.CoCreate.crdt.replaceText({collection:i,name:c,document_id:a,name:c,value:r});else{let t=await this.updateDocument({namespace:s,room:l,collection:i,document_id:a,upsert:!0,broadcast:u,broadcast_sender:d,is_flat:!1!==o,data:{[c]:r}});t.document_id&&a!==t.document_id&&await this.setDocumentId({element:e,docuement_id:t.document_id})}},setDocumentId:async function({element:t,form:e,document_id:n}){!e&&t&&(e=t.closest("form")),e?await CoCreate.form.setDocumentId(e):t&&t.setAttribute("data-document_id",n)},...n}}(window,t,e)}.apply(e,r))||(t.exports=o)},611:function(t,e,n){var r,o;"undefined"!=typeof self&&self,r=[n(585),n(375)],void 0===(o=function(t,e){return function(t,e,n){if(t){let t=window.CoCreateCrudSocket;t||(t=new e("ws"),window.CoCreateCrudSocket=t),n.setSocket(t),n.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return n}(!0,t,e)}.apply(e,r))||(t.exports=o)},965:function(t,e){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(){function t(e,n){e=e||{};for(let r of Object.keys(n))n[r]instanceof Object&&Object.assign(n[r],t(e[r],n[r]));return Object.assign(e||{},n),e}function e(t,e){if(!e)return t;let n=e.split("."),r=t;for(var o=n.length-1;o>=0;o--)r={[n[o]]:r};return r}function n(t,e){try{let n=/([\w\W]+)\[(\d+)\]/gm.exec(t);if(n&&3==n.length){let r=n[1],o=parseInt(n[2]);e[r]&&Array.isArray(e[r])||(e[r]=[]),e[r][o]=e[t],delete e[t],t=r}}catch{}return t}function r(t,e){try{if(!t||!e)return null;if(e[t])return e[t];let r=t.split("."),o={...e};for(var n=0;n<r.length&&o;n++)o=o[r[n]];return o}catch{return null}}function o(t){return!!t&&t.constructor===Object}function i(t){return!!t&&t.constructor===Array}function a(r){let o=Object.keys(r),i={};return o.forEach((o=>{if((o=n(o,r)).split(".").length>1){let n=e(r[o],o);delete r[o],i=t(i,n)}else i[o]=r[o]})),i}function c(t){let e=Object.keys(t),n={};return e.forEach((e=>{let r=t[e];if(o(t[e])){let r=c(t[e]);Object.keys(r).forEach((t=>{let o=r[t];n[t=e+"."+t]=o}))}else i(r)?r.forEach(((t,r)=>{n[`${e}[${r}]`]=t})):n[e]=t[e]})),n}function s(t){if(!t)return;let e=t.getAttribute("data-collection"),n=t.getAttribute("data-document_id"),r=t.getAttribute("name"),o=t.getAttribute("data-room");return{collection:e,document_id:n,name:r,is_realtime:h(t),is_save:u(t),is_read:l(t),is_update:d(t),is_listen:p(t),broadcast:f(t),broadcast_sender:m(t),room:o}}const l=t=>g(t,"data-read_value"),u=t=>g(t,"data-save_value"),d=t=>g(t,"data-update_value"),f=t=>g(t,"data-broadcast"),m=t=>g(t,"data-broadcast_sender"),p=t=>g(t,"data-listen"),h=t=>g(t,"data-realtime");function g(t,e){return!!t&&"false"!==t.getAttribute(e)}function y(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)&&"null"!==t.toLowerCase()}function _(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function b(t){const{collection:e,document_id:n,name:r}=s(t);return!(_(e)||_(r)||!("INPUT"===t.tagName&&["text","email","tel","url"].includes(t.type)||"TEXTAREA"===t.tagName)||!r||!h(t)||"true"===t.getAttribute("data-unique")||"password"===t.type||!l(t))}function v(t){try{return!!t&&"null"!==t.toLowerCase()}catch(t){return!1}}function _(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}return{decodeObject:a,encodeObject:c,getAttr:s,isRealtimeAttr:h,isReadAttr:l,isSaveAttr:u,isUpdateAttr:d,isFlatAttr:t=>g(t,"data-flat"),checkAttrValue:y,isCRDT:b,checkDocumentId:v,getValueByPath:r,isJsonString:_}}()}.apply(e,[]))||(t.exports=n)},406:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(611),o=n.n(r);const i={items:[],ioInstance:null,moduleAttribues:[],module_items:[],__init:function(){this.__initIntesection(),this.__initSocket(),this.__initEvents()},__initIntesection:function(){const t=this;this.ioInstance=new IntersectionObserver(((e,n)=>{e.forEach((e=>{if(e.isIntersecting){const n=t.__getMainAttribue(e.target);n.id&&document.dispatchEvent(new CustomEvent("CoCreateFilter-loadMore",{detail:{attrName:n.name,attrId:n.id}})),t.ioInstance.unobserve(e.target)}}))}),{threshold:1})},__runLoadMore:function(t,e){if(!e||!t)return;let n=this.items.find((n=>n.attrName===t&&n.id===e));n&&n.count>0&&this.fetchData(n)},__getMainAttribue:function(t){const e=this.moduleAttribues.find((e=>""!==(t.getAttribute(e)||"")));return e?{name:e,id:t.getAttribute(e)}:{}},__initSocket:function(){const t=this;o().listen("readDocumentList",(function(e){let n=e.element,r=t.items.find((t=>t.id===n));if(r){const n=e.data;let o=document.querySelector(`[${r.attrName}="${r.id}"][data-fetch_type="scroll"]`);n.length>0&&o&&t.ioInstance.observe(o);const i=e.operator.total,a=document.querySelectorAll(`[${r.attrName}="${r.id}"][data-fetch_type="total"]`);a&&a.forEach((t=>t.innerHTML=i))}}))},__initEvents:function(){const t=this;document.addEventListener("CoCreateFilter-loadMore",(function(e){const n=e.detail.attrId,r=e.detail.attrName;t.__runLoadMore(r,n)})),document.querySelectorAll('[data-fetch_type="loadmore"]').forEach((e=>{e.addEventListener("click",(function(n){n.preventDefault();const r=t.__getMainAttribue(e);r.id&&t.__runLoadMore(r.attrName,r.attrId)}))}))},setFilter:function(t,e,n){if(!e)return;let r=t.getAttribute(e);if(!r)return;this.moduleAttribues.includes(e)||this.moduleAttribues.push(e);let o=t.getAttribute("data-fetch_collection"),i="collection"==t.getAttribute("data-fetch_value_type"),a=t.getAttribute("data-order_by"),c=t.getAttribute("data-order_type")||"asc",s=parseInt(t.getAttribute("data-fetch_count")),l={el:t,id:r,eId:r,type:n,attrName:e,collection:o,startIndex:0,options:{},fetch:{},is_collection:i,search:{type:"or",value:[]},orders:[],filters:[]};return!isNaN(s)&&s>0&&(l.count=s),a&&l.orders.push({name:a,type:"asc"==c?1:-1}),this._initFilter(l,r,e),this._initOrder(l,r,e),this.items.push(l),this._initInputForm(l,e),this._initExportImport(l,r,e),l},_initFilter:function(t,e,n){let r=t.el.getRootNode().querySelectorAll("["+n+'="'+e+'"]');for(var o=0;o<r.length;o++){let i=r[o],a=i.getAttribute("data-filter_name"),c=i.getAttribute("data-filter_operator")?i.getAttribute("data-filter_operator"):"$contain",s=i.getAttribute("data-filter_value_type")?i.getAttribute("data-filter_value_type"):"string",l=i.getAttribute("data-filter_type"),u=i.getAttribute("data-filter_value");if(null!=u)if("raw"!==s&&(u=u.replace(/\s/g,"").split(",")),a){let e=this.getFilterByName(t,a,c);if("string"!=s)for(let t=0;t<u.length;t++)u[t]=Number(u[t]);this.insertArrayObject(t.filters,e,{name:a,value:u,operator:c,type:l})}else t.search.value=this._makeSearchOption(e,n)}},_initOrder:function(t,e,n){let r=t.el.getRootNode().querySelectorAll("["+n+'="'+e+'"]');const o=this;for(var i=0;i<r.length;i++){let e=r[i],n=e.getAttribute("data-order_by"),a=e.getAttribute("value");n&&a&&(["A","BUTTON"].includes(e.tagName)?e.addEventListener("click",(function(){let e=this.getAttribute("data-order_by"),n=this.getAttribute("value");o._applyOrder(t,e,n),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))})):this._applyOrder(t,n,a))}this._initToggleOrderEvent(t,e,n)},_initToggleOrderEvent:function(t,e,n){let r=document.querySelectorAll(`[${n}="${e}"][data-toggle_order]`);const o=this;r.forEach((e=>{e.addEventListener("click",(function(){let n=this.getAttribute("data-toggle_order")||"",i=this.getAttribute("data-order_by");n="asc"===n?"desc":"asc";for(let t=0;t<r.length;t++)r[t]!==e&&r[t].setAttribute("data-toggle_order","");t.orders=[],o._applyOrder(t,i,n),e.setAttribute("data-toggle_order",n),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))}))}))},_initExportImport:function(t,e,n){let r=document.querySelector(`[data-export_type][${n}="${e}"]`),i=document.querySelector(`[data-import="true"][${n}="${e}"]`);const a=this;r&&r.addEventListener("click",(function(){if(!t)return;let e=a.makeFetchOptions(t);e.export={collection:e.collection,type:r.getAttribute("data-export_type")||"json"},o().readDocumentList(e)})),i&&i.addEventListener("click",(function(){var e=document.createElement("input");if(e.type="file",!t)return;let n=t.collection;e.onchange=t=>{var e=t.target.files[0];o().importCollection({collection:n,file:e})},e.click()}))},_applyOrder:function(t,e,n){if(!n)return;let r=0,o=this.getOrderByName(t,e);r="asc"==n?1:"desc"==n?-1:[],this.insertArrayObject(t.orders,o,{name:e,type:r},r)},changeCollection:function(t){let e=t.el.getAttribute("data-fetch_collection");t.collection=e,t.startIndex=0},_makeSearchOption:function(t,e){let n=document.querySelectorAll("form["+e+"="+t+"]"),r="["+e+"="+t+"]",o=document.querySelectorAll("input"+r+",textarea"+r+", select"+r),i=[];for(let t=0;t<n.length;t++){let e=n[t].querySelectorAll("input, textarea, select");e=Array.prototype.slice.call(e),i=i.concat(e)}o=Array.prototype.slice.call(o),i=i.concat(o);let a=[];for(var c=0;c<i.length;c++){let t=i[c].getAttribute("data-filter_name"),e=i[c].getAttribute("data-order_by"),n=i[c],r=n.getAttribute("data-value_type")?n.getAttribute("data-value_type"):"string",o=null;t||e||("checkbox"!=n.type||n.checked?(o=n.value,"string"!=r&&(o=Number(o)),o&&!a.includes(o)&&a.push(o)):o=null)}return a},_initInputForm:function(t,e){if(!t)return;let n="["+e+'="'+t.id+'"]',r=t.el.getRootNode().querySelectorAll("form"+n+" input, form"+n+" textarea, form"+n+" select"),o=t.el.getRootNode().querySelectorAll("input"+n+",textarea"+n+", select"+n);this.setCheckboxName(t.id,e),r=Array.prototype.slice.call(r),o=Array.prototype.slice.call(o),r=r.concat(o);for(let e=0;e<r.length;e++){let n=r[e];n.getAttribute("data-order_by")?this._initOrderInput(t,n):this._initFilterInput(t,n,t.id)}},_initOrderInput:function(t,e){var n=this;e.addEventListener("change",(function(e){e.preventDefault();let r=this.getAttribute("data-order_by"),o=0,i=n.getOrderByName(t,r);o="asc"==this.value?1:"desc"==this.value?-1:[],n.insertArrayObject(t.orders,i,{name:r,type:o},o),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))}))},_initFilterInput:function(t,e,n){var r,o=this;e.addEventListener("input",(function(i){i.preventDefault();let a=this.getAttribute("data-filter_name"),c=this.getAttribute("data-filter_operator")||"$contain",s=this.getAttribute("data-filter_type"),l=this.getAttribute("data-filter_value_type")||"string";clearTimeout(r),r=setTimeout((function(){if(a){let n=o.getFilterByName(t,a,c),d=e.type,f=[];if("checkbox"==d)for(var r=document.querySelectorAll("input[name="+e.name+"]:checked"),i=0;i<r.length;i++)f.push(r[i].value);else if("raido"==d);else if("range"==d)f=[Number(e.min),Number(e.value)];else{var u=e.value;"string"!=l&&(u=Number(u)),"none"!=u&&(f=[u]),"raw"===l&&(f=u)}o.insertArrayObject(t.filters,n,{name:a,value:f,operator:c,type:s})}else t.search.value=o._makeSearchOption(n,t.attrName);t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"filter"}}))}),500)}))},setCheckboxName:function(t,e){for(var n=document.querySelectorAll("form["+e+'="'+t+'"]'),r=0;r<n.length;r++)for(var o=n[r].querySelectorAll("input[type=checkbox], form input[type=radio]"),i=0;i<o.length;i++){var a=o[i].getAttribute("name"),c=o[i].getAttribute("data-filter_name");!a&&c&&o[i].setAttribute("name","_"+t+"-"+c+"_"+r)}},getFilterByName:function(t,e,n){for(var r=0;r<t.filters.length;r++){var o=t.filters[r];if(o.name==e&&o.operator==n)return r}return-1},insertArrayObject:function(t,e,n,r){return r||(r=n.value),"object"==typeof r&&0==r.length?-1!=e&&t.splice(e,1):-1!=e?t[e]=n:t.push(n),t},getOrderByName:function(t,e){for(var n=0;n<t.orders.length;n++)if(t.orders[n].name==e)return n;return-1},defineEvent:function(t){t.el.addEventListener("fetchFilterData",(function(t){}))},fetchData:function(t){let e=this.makeFetchOptions(t);o().readDocumentList(e)},getObjectByFilterId:function(t,e){for(var n=0;n<t.length;n++){let r=t[n].filter;if(r&&r.id==e)return t[n]}},getObjectByElement:function(t,e){for(var n=0;n<t.length;n++){let r=t[n].filter;if(r&&r.el.isSameNode(e))return t[n]}},makeFetchOptions:function(t){let e={collection:t.collection,element:t.eId,metadata:{isRefresh:t.isRefresh},operator:{filters:t.filters,orders:t.orders,search:t.search,startIndex:t.startIndex},is_collection:t.is_collection};return t.count&&(e.operator.count=t.count),e},init:function({name:t,attribute:e,callback:n}){let r=document.querySelectorAll(`[data-fetch_collection][${e}]`);const i=this;r.forEach((n=>{i.__initFilterElement(n,e,t)})),o().listen("readDocumentList",(function(t){n.call(null,t)}))},__initFilterElement:function(t,e,n){let r=t.getAttribute(e);const o=this;if(!r)return;let i=this.setFilter(t,e,n);i&&(this.module_items.push({el:t,filter:i,id:r,name:n}),t.addEventListener("changeFilterInput",(function(t){o.fetchData(i)})),this.fetchData(i))}};i.__init();const a=i},446:function(t,e){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(t){function e(){let e={};return t&&t.config&&(e=t.config),{apiKey:e.apiKey,organization_id:e.organization_Id}}function n(e){let n={};return t&&t.config&&(n=t.config),{apiKey:e.apiKey||n.apiKey,organization_id:e.organization_id||n.organization_Id}}function r(e,n){let r={};t&&t.config&&(r=t.config);let o=e||r.organization_Id,i=n||"";return i?`${o}/${i}`:o}return{getCommonParams:e,getCommonParamsExtend:n,generateSocketClient:r}}(window)}.apply(e,[]))||(t.exports=n)},585:function(t,e,n){var r,o;"undefined"!=typeof self&&self,r=[n(446),n(212)],void 0===(o=function(t,e){return function(t,e,n,r,o){class i{constructor(t="crud"){this.prefix=t||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(t){this.globalScope=`${this.prefix}/${t}`}getGlobalScope(){return this.globalScope}create(t){const{namespace:o,room:i}=t,a=this.getKey(o,i);let c,s=this;if(o&&this.setGlobalScope(o),this.sockets.get(a))return void(c=this.sockets.get(a));let l=e.location.protocol;"about:"===e.location.protocol&&(l=e.parent.location.protocol,t.host||(t.host=e.parent.location.host));let u="http:"===l?"ws":"wss";const d=t.port?t.port:8088;let f=`${u}://${e.location.host}:${d}/${a}`;t.host&&(f=t.host.includes("://")?`${t.host}/${a}`:t.host.includes(":")?`${u}://${t.host}/${a}`:`${u}://${t.host}:${d}/${a}`);try{let t=null;e.localStorage&&(t=e.localStorage.getItem("token")),c=new n(f,t),c.cocreate_connected=!1,this.sockets.set(a,c)}catch(t){return}c.onopen=function(t){c.cocreate_connected||(c.cocreate_connected=!0),(s.messageQueue.get(a)||[]).forEach((t=>c.send(JSON.stringify(t)))),s.messageQueue.set(a,[])},c.onclose=function(e){switch(e.code){case 1e3:break;default:s.destroy(c,a),s.reconnect(c,t)}},c.onerror=function(e){s.destroy(c,a),s.reconnect(c,t)},c.onmessage=function(t){try{if(e.Blob&&t.data instanceof r)return void s.saveFile(t.data);let n=JSON.parse(t.data);if(n.data&&(n.data.uid&&s.__fireEvent(n.data.uid,n.data),n.data.event))return void s.__fireEvent(n.data.event,n.data);n.action;const o=s.listeners.get(n.action);if(!o)return;o.forEach((t=>{t(n.data,a)}))}catch(t){}}}__fireEvent(t,n){if(e.CustomEvent){var r=new e.CustomEvent(t,{detail:n});e.document.dispatchEvent(r)}else process.emit(t,n)}send(t,e,n){const r=o.generate(),i={action:t,data:{...e,uid:r}},a=this.getKeyByRoom(n),c=this.getByRoom(n);return c&&c.cocreate_connected?c.send(JSON.stringify(i)):this.messageQueue.get(a)?this.messageQueue.get(a).push(i):this.messageQueue.set(a,[i]),r}sendFile(t,e){const n=this.getByRoom(e);n&&n.send(t)}listen(t,e){this.listeners.get(t)?this.listeners.get(t).push(e):this.listeners.set(t,[e])}reconnect(t,e){let n=this;setTimeout((function(){n.create(e)}),1e3)}destroy(t,e){t&&(t.onerror=t.onopen=t.onclose=null,t.close(),t=null),this.sockets.get(e)&&this.sockets.delete(e)}destroyByKey(t){let e=this.sockets.get(t);e&&this.destroy(e,t)}getKey(t,e){let n=`${this.prefix}`;return t&&""!=t&&(n+=e&&""!=e?`/${t}/${e}`:`/${t}`),n}getByRoom(t){let e=this.getKeyByRoom(t);return this.sockets.get(e)}getKeyByRoom(t){let e=this.globalScope;return t&&(e=`${this.prefix}/${t}`),e}saveFile(t){if(e.document){const r=this.saveFileName||"downloadFile";var n=e.document.createElement("a");e.document.body.appendChild(n),n.style="display: none";let o=window.URL.createObjectURL(t);n.href=o,n.download=r,n.click(),e.URL.revokeObjectURL(o),this.saveFileName=""}}listenAsync(t){return new Promise(((n,r)=>{let o=setTimeout((()=>{clearTimeout(o),n(null)}),5e3);e.document?e.document.addEventListener(t,(function(t){n(t.detail)}),{once:!0}):process.once(t,(t=>{n(t)}))}))}}return i}(0,window,WebSocket,Blob,e)}.apply(e,r))||(t.exports=o)},212:function(t,e){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(t){const e={attribute:"data-uuid",init:function(e){if(!t.document)return;const n=e||t.document;if(!n.querySelectorAll)return;let r=n.querySelectorAll(`[${this.attribute}]`);const o=this;r.forEach((t=>{const e=parseInt(t.getAttribute(o.attribute))||36,n=o.generate(e);"INPUT"===t.tagName||"TEXTAREA"===t.tagName?t.value=n:t.innerHTML=n}))},generate:function(e=36){let n=(new Date).getTime(),r=t.performance&&t.performance.now&&1e3*t.performance.now()||0,o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=o.length)o=o.substr(0,e);else{let t=e-o.length,n="-xxxyyxxx",r=Math.floor(t/n.length);for(let t=0;t<r;t++)o+=n;r=t-r*n.length,o+=n.substr(0,r)}return o.replace(/[xy]/g,(function(t){var e=16*Math.random();return n>0?(e=(n+e)%16|0,n=Math.floor(n/16)):(e=(r+e)%16|0,r=Math.floor(r/16)),("x"==t?e:7&e|8).toString(16)}))}};return e.init(),e}(window)}.apply(e,[]))||(t.exports=n)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";var t=r;t.default=void 0;var e=i(n(406)),o=i(n(611));function i(t){return t&&t.__esModule?t:{default:t}}var a={selector:".progress-wrapper",mainObjects:[],init:function(){this.initElement(),this.initEvent()},initElement:function(t){let n=(t||document).querySelectorAll(this.selector),r=this;n.forEach((t=>{let n=e.default.setFilter(t,"data-progress_id","progress");if(!n)return;let o={el:t,filter:n,id:t.getAttribute("data-progress_id")};r.mainObjects.push(o),r.fetchProgess(t)}))},initEvent:function(){let t=this;o.default.listen("readDocumentList",(function(e){"progress-total"==e.metadata?t.renderProgress(e,!0):"progress-value"==e.metadata&&t.renderProgress(e,!1)}))},renderProgress(t,e){if(!t)return;const n=t.element;if(!n)return;const r=t.data.length;let o=this,i=[],a=e?".progressTotal":".progressValue";a+=`[data-progress_id="${n}"]`,i=document.querySelectorAll(a),i.forEach((t=>{t.textContent=r})),i=document.querySelectorAll(`.progressbar[data-progress_id="${n}"]`),i.forEach((t=>{"PROGRESS"===t.tagName?e?t.setAttribute("max",r):t.setAttribute("value",r):(e?t.setAttribute("data-total",r):t.setAttribute("data-value",r),o.renderBar(t))}))},renderBar:function(t){const e=Number(t.getAttribute("data-total")),n=Number(t.getAttribute("data-value"));if(!e||!n||0===e)return;const r=n/e*100;t.innerHTML=`<div style="width: ${r}%"></div>`},fetchProgess:function(t){let n=null,r=t.getAttribute("data-progress_id");if(this.mainObjects.forEach((t=>{t.id==r&&(n=t)})),!n)return;let i=n.filter,a=e.default.makeFetchOptions(i),c=e.default.makeFetchOptions(i),s=t.getAttribute("data-progress_name"),l=t.getAttribute("data-progress_value"),u=t.getAttribute("data-progress_operator")||"contain";a.metadata="progress-total",c.metadata="progress-value";let d=[].concat(c.operator.filters);d.push({name:s,value:[l],operator:u}),c.operator.filters=d,o.default.readDocumentList(a),o.default.readDocumentList(c)}};a.init();var c=a;t.default=c})(),r=r.default})()}));